import{o as h,d as m,a as t,r as H,u as S,q as B,b as i,g as u,w as l,f as _,t as M,n as N,F as x,K as F,M as P,h as D,l as z,v as I,N as A,e as O}from"./app.5e4949d9.js";import{_ as q}from"./ActionMessage.58e1c932.js";import{_ as K}from"./FormSection.9dd79621.js";import{_ as Z}from"./PrimaryButton.ba0aef49.js";import{S as J}from"./SectionBorder.6da54ae5.js";import{_ as Q}from"./InputLabel.b81c6b48.js";import{_ as R}from"./TextInput.3db28c5a.js";import{_ as C}from"./SecondaryButton.36a5b7b0.js";import{_ as L}from"./DangerButton.11a0d43a.js";import{_ as j}from"./ConfirmationModal.991a952f.js";import{n as T}from"./Notify.69cdcefa.js";import{_ as E}from"./_plugin-vue_export-helper.cdc0426e.js";import"./SectionTitle.cf065faf.js";import"./Modal.a6d936eb.js";function W(s,e){return h(),m("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true"},[t("path",{"fill-rule":"evenodd",d:"M12.53 16.28a.75.75 0 01-1.06 0l-7.5-7.5a.75.75 0 011.06-1.06L12 14.69l6.97-6.97a.75.75 0 111.06 1.06l-7.5 7.5z","clip-rule":"evenodd"})])}function X(s,e){return h(),m("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true"},[t("path",{"fill-rule":"evenodd",d:"M12 1.5a5.25 5.25 0 00-5.25 5.25v3a3 3 0 00-3 3v6.75a3 3 0 003 3h10.5a3 3 0 003-3v-6.75a3 3 0 00-3-3v-3c0-2.9-2.35-5.25-5.25-5.25zm3.75 8.25v-3a3.75 3.75 0 10-7.5 0v3h7.5z","clip-rule":"evenodd"})])}class Y{constructor(e,o=500){return new Promise((p,c)=>{e.style.removeProperty("display");let y=window.getComputedStyle(e).display;y==="none"&&(y="block"),e.style.display=y;let n=e.offsetHeight;e.style.overflow="hidden",["height","paddingTop","paddingBottom","marginTop","marginBottom"].forEach(r=>e.style[r]=0),e.offsetHeight,e.style.transitionProperty="height, margin, padding",e.style.transitionDuration=o+"ms",e.style.height=n+"px",["padding-top","padding-bottom","margin-top","margin-bottom"].forEach(r=>e.style.removeProperty(r)),window.setTimeout(()=>["height","overflow","transition-duration","transition-property"].forEach(r=>e.style.removeProperty(r)),o),p(!1)})}}class ee{constructor(e,o=500,p){return new Promise((c,y)=>{e.style.height=e.offsetHeight+"px",e.style.transitionProperty="height, margin, padding",e.style.transitionDuration=o+"ms",e.offsetHeight,e.style.overflow="hidden",["height","paddingTop","paddingBottom","marginTop","marginBottom"].forEach(n=>e.style[n]=0),window.setTimeout(()=>{e.style.display="none",["height","padding-top","padding-bottom","margin-bottom","overflow","transition-duration","transition-property"].forEach(n=>e.style.removeProperty(n)),c(!1)},o)})}}class te{constructor(e,o=500){return window.getComputedStyle(e).display==="none"?new Y(e,o):new ee(e,o)}}class oe{constructor(e){let o=0,p=0;if(e===void 0)return{top:p,left:o};for(;e&&!isNaN(e.offsetLeft)&&!isNaN(e.offsetTop);)o+=e.offsetLeft-e.scrollLeft,p+=e.offsetTop-e.scrollTop,e=e.offsetParent;return{top:p,left:o}}}const se=s=>(F("data-v-a3e60266"),s=s(),P(),s),ae={class:"accordion"},le={class:"flex items-center p-3"},ne={class:"slot"},re={class:"w-full flex justify-end items-center gap-2"},ie={class:"arrow-icon icon-hover"},de=se(()=>t("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",fill:"currentColor",class:"bi bi-trash3",viewBox:"0 0 16 16"},[t("path",{d:"M6.5 1h3a.5.5 0 0 1 .5.5v1H6v-1a.5.5 0 0 1 .5-.5ZM11 2.5v-1A1.5 1.5 0 0 0 9.5 0h-3A1.5 1.5 0 0 0 5 1.5v1H2.506a.58.58 0 0 0-.01 0H1.5a.5.5 0 0 0 0 1h.538l.853 10.66A2 2 0 0 0 4.885 16h6.23a2 2 0 0 0 1.994-1.84l.853-10.66h.538a.5.5 0 0 0 0-1h-.995a.59.59 0 0 0-.01 0H11Zm1.958 1-.846 10.58a1 1 0 0 1-.997.92h-6.23a1 1 0 0 1-.997-.92L3.042 3.5h9.916Zm-7.487 1a.5.5 0 0 1 .528.47l.5 8.5a.5.5 0 0 1-.998.06L5 5.03a.5.5 0 0 1 .47-.53Zm5.058 0a.5.5 0 0 1 .47.53l-.5 8.5a.5.5 0 1 1-.998-.06l.5-8.5a.5.5 0 0 1 .528-.47ZM8 4.5a.5.5 0 0 1 .5.5v8.5a.5.5 0 0 1-1 0V5a.5.5 0 0 1 .5-.5Z"})],-1)),ce=[de],ue={class:"body hidden"},pe={class:"px-3"},ve={__name:"Accordion",props:{vaultId:Number,data:Object},setup(s){const e=n=>{const r=n.currentTarget.nextSibling,v=n.currentTarget.querySelector(".arrow-icon svg");new te(r).finally(()=>{new oe(r).top!==0?v.style.transform="rotate(180deg)":v.style.transform=""})},o=H(null),p=S(),c=(n,r)=>{n.stopImmediatePropagation()&&n.preventDefault(),o.value=r},y=()=>{p.delete(route("vaults.datas.groups.destroy",{dataId:o.value.id}),{preserveScroll:!0,preserveState:!0,onSuccess:()=>{T("info",`Deleted group \u201E${o.value.group_name}\u201C`),o.value=null}})};return(n,r)=>(h(),m(x,null,[t("div",ae,[t("div",{onClick:e,class:"head"},[t("div",le,[t("div",ne,[B(n.$slots,"head",{},void 0,!0)]),t("div",re,[t("div",ie,[i(u(W),{class:"w-5 h-5"})]),t("div",{onClick:r[0]||(r[0]=v=>c(v,s.data)),class:"delete icon-hover"},ce)])])]),t("div",ue,[t("div",pe,[B(n.$slots,"body",{},void 0,!0)])])]),i(j,{show:o.value!=null,onClose:r[2]||(r[2]=v=>o.value=null)},{title:l(()=>[_(" Delete Group \u2013 \u201E"+M(s.data.group_name)+"\u201C ",1)]),content:l(()=>[_(" Are you sure you would like to delete this group? ")]),footer:l(()=>[i(C,{onClick:r[1]||(r[1]=v=>o.value=null)},{default:l(()=>[_(" Cancel ")]),_:1}),i(L,{class:N(["ml-3",{"opacity-25":u(p).processing}]),disabled:u(p).processing,onClick:y},{default:l(()=>[_(" Delete ")]),_:1},8,["class","disabled"])]),_:1},8,["show"])],64))}},fe=E(ve,[["__scopeId","data-v-a3e60266"]]);const b=s=>(F("data-v-9f8e8cff"),s=s(),P(),s),_e={class:"flex justify-end mt-4 mb-4"},he=b(()=>t("hr",{class:"my-8 block"},null,-1)),me=["value"],ye={class:"key flex"},ge=["value"],we=b(()=>t("span",{class:"icon"}," = ",-1)),xe={class:"value"},be=["data-value"],ke={class:"button"},Se=b(()=>t("span",null," Encrypt ",-1)),$e={class:"close"},Ce=["onClick"],Ve=b(()=>t("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",fill:"currentColor",class:"bi bi-trash3",viewBox:"0 0 16 16"},[t("path",{d:"M6.5 1h3a.5.5 0 0 1 .5.5v1H6v-1a.5.5 0 0 1 .5-.5ZM11 2.5v-1A1.5 1.5 0 0 0 9.5 0h-3A1.5 1.5 0 0 0 5 1.5v1H2.506a.58.58 0 0 0-.01 0H1.5a.5.5 0 0 0 0 1h.538l.853 10.66A2 2 0 0 0 4.885 16h6.23a2 2 0 0 0 1.994-1.84l.853-10.66h.538a.5.5 0 0 0 0-1h-.995a.59.59 0 0 0-.01 0H11Zm1.958 1-.846 10.58a1 1 0 0 1-.997.92h-6.23a1 1 0 0 1-.997-.92L3.042 3.5h9.916Zm-7.487 1a.5.5 0 0 1 .528.47l.5 8.5a.5.5 0 0 1-.998.06L5 5.03a.5.5 0 0 1 .47-.53Zm5.058 0a.5.5 0 0 1 .47.53l-.5 8.5a.5.5 0 1 1-.998-.06l.5-8.5a.5.5 0 0 1 .528-.47ZM8 4.5a.5.5 0 0 1 .5.5v8.5a.5.5 0 0 1-1 0V5a.5.5 0 0 1 .5-.5Z"})],-1)),De=[Ve],Ne=b(()=>t("hr",{class:"mt-2"},null,-1)),Te=["onSubmit"],Be={class:"flex mt-3"},Ie={class:"key flex"},Ae=["onUpdate:modelValue"],He=b(()=>t("span",{class:"icon"}," = ",-1)),Me={class:"value flex"},Fe=["onUpdate:modelValue"],Pe={class:"flex justify-end w-full"},Ze={__name:"VaultData",props:{vault:Object},setup(s){const e=s,o=g=>{const a=g.currentTarget.parentNode.parentNode,w=a.querySelector(".value input"),{value:f}=w.dataset;axios.post(route("vaults.datas.encrypt"),{value:f}).then(k=>{w.value="Value encrypted",a.dataset.state="decrypted"})},p=g=>{const d=g.currentTarget,a=d.parentNode.parentNode,{value:w}=d.dataset;axios.post(route("vaults.datas.decrypt"),{value:w}).then(f=>{const{data:k}=f;d.value=k,a.dataset.state="encrypted"})},c=S({dataId:Number,key:[],value:[]}),y=g=>{const[d,a]=[c.key[g],c.value[g]];console.log(c.key,c.value),c.post(route("vaults.datas.groups.fields.create",{dataId:g,key:d,value:a}),{preserveScroll:!0,preserveState:!0,onSuccess:()=>c.reset()})},n=S({vault:e.vault,name:""}),r=()=>{n.post(route("vaults.datas.groups.create"),{preserveScroll:!0,preserveState:!0,onSuccess:()=>{T("success",`Created new group \u201E${n.name}\u201C`),n.reset("name")}})},v=H(null),$=S(),G=(g,d)=>{v.value={dataId:g,key:d}},U=()=>{$.delete(route("vaults.datas.groups.fields.destroy",{data:v.value}),{preserveScroll:!0,preserveState:!0,onSuccess:()=>v.value=null})};return(g,d)=>(h(),m(x,null,[i(Q,{for:"group-name",value:"Group Name"}),i(R,{modelValue:u(n).name,"onUpdate:modelValue":d[0]||(d[0]=a=>u(n).name=a),id:"group-name",type:"text",class:"mt-1 block w-full"},null,8,["modelValue"]),t("div",_e,[i(Z,{onClick:r},{default:l(()=>[_(" Add group ")]),_:1})]),he,(h(!0),m(x,null,D(s.vault.datas,(a,w)=>(h(),m("div",{key:w,class:"data mt-4 shadow-md border rounded-lg"},[i(fe,{vaultId:s.vault.id,data:a},{head:l(()=>[t("input",{type:"text",value:a.group_name,class:"py-0 pl-0 font-bold w-max",onClick:d[1]||(d[1]=f=>{f.stopImmediatePropagation()})},null,8,me)]),body:l(()=>[(h(!0),m(x,null,D(JSON.parse(a.fields),f=>(h(),m(x,{key:f},[(h(!0),m(x,null,D(f,(k,V)=>(h(),m("div",{key:V,class:"state flex mb-2","data-state":"decrypted"},[t("div",ye,[t("input",{type:"text",value:V,class:"key pl-0"},null,8,ge),we]),t("div",xe,[t("input",{onClick:p,"data-value":k,type:"text",value:"Value encrypted"},null,8,be)]),t("div",ke,[i(C,{onClick:o,"data-value":k},{default:l(()=>[i(u(X),{class:"w-5 h-5 mr-2"}),Se]),_:2},1032,["data-value"])]),t("div",$e,[t("div",{onClick:Ge=>G(a.id,V),class:"icon-hover"},De,8,Ce)])]))),128))],64))),128)),Ne,t("form",{onSubmit:z(f=>y(a.id),["prevent"])},[t("div",Be,[t("div",Ie,[I(t("input",{"onUpdate:modelValue":f=>u(c).key[a.id]=f,type:"text",class:"key pl-0",placeholder:"Key / Identifier"},null,8,Ae),[[A,u(c).key[a.id]]]),He]),t("div",Me,[I(t("input",{"onUpdate:modelValue":f=>u(c).value[a.id]=f,type:"text",placeholder:"Value"},null,8,Fe),[[A,u(c).value[a.id]]])]),t("div",Pe,[i(C,{onClick:f=>y(a.id),class:"my-5"},{default:l(()=>[_(" Add field ")]),_:2},1032,["onClick"])])])],40,Te)]),_:2},1032,["vaultId","data"])]))),128)),i(j,{show:v.value!=null,onClose:d[3]||(d[3]=a=>v.value=null)},{title:l(()=>[_(" Delete Field \u2013 \u201E"+M(v.value.key)+"\u201C ",1)]),content:l(()=>[_(" Are you sure you would like to delete this field? ")]),footer:l(()=>[i(C,{onClick:d[2]||(d[2]=a=>v.value=null)},{default:l(()=>[_(" Cancel ")]),_:1}),i(L,{class:N(["ml-3",{"opacity-25":u($).processing}]),disabled:u($).processing,onClick:U},{default:l(()=>[_(" Delete ")]),_:1},8,["class","disabled"])]),_:1},8,["show"])],64))}},Le=E(Ze,[["__scopeId","data-v-9f8e8cff"]]),je={key:0},Ee={class:"col-span-6"},st={__name:"VaultDataManager",props:{vault:Object},setup(s){const e=s,o=S({logo:null,name:"",url:"",datas:null}),p=()=>{console.log(e.vault.datas),T("success","ah!!")};return(c,y)=>s.vault?(h(),m("div",je,[i(J),i(K,{onSubmitted:p},{title:l(()=>[_(" Vault Data Manager ")]),description:l(()=>[_(" Here you can add vault-related data like credentials for a specific area of this vault. ")]),form:l(()=>[t("div",Ee,[i(Le,{vault:s.vault},null,8,["vault"])])]),actions:l(()=>[i(q,{on:u(o).recentlySuccessful,class:"mr-3"},{default:l(()=>[_(" Saved. ")]),_:1},8,["on"]),i(Z,{class:N({"opacity-25":u(o).processing}),disabled:u(o).processing},{default:l(()=>[_(" Save ")]),_:1},8,["class","disabled"])]),_:1})])):O("",!0)}};export{st as default};
