import{o as h,d as m,a as e,r as A,u as S,q as T,b as i,g as c,w as a,f as _,t as H,n as N,F as b,K as M,M as F,h as D,l as U,v as B,N as I,e as z}from"./app.e643e729.js";import{_ as O}from"./ActionMessage.de611371.js";import{_ as q}from"./FormSection.677be715.js";import{_ as P}from"./PrimaryButton.97111ce2.js";import{S as K}from"./SectionBorder.535ee19c.js";import{_ as J}from"./InputLabel.ec84f8f3.js";import{_ as Q}from"./TextInput.e8bdf9a0.js";import{_ as C}from"./SecondaryButton.59f83d51.js";import{_ as Z}from"./DangerButton.f9f38a82.js";import{_ as L}from"./ConfirmationModal.3598f560.js";import{_ as j}from"./_plugin-vue_export-helper.cdc0426e.js";import"./SectionTitle.413e1bc1.js";import"./Modal.6c46e0e4.js";function R(o,t){return h(),m("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true"},[e("path",{"fill-rule":"evenodd",d:"M12.53 16.28a.75.75 0 01-1.06 0l-7.5-7.5a.75.75 0 011.06-1.06L12 14.69l6.97-6.97a.75.75 0 111.06 1.06l-7.5 7.5z","clip-rule":"evenodd"})])}function W(o,t){return h(),m("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true"},[e("path",{"fill-rule":"evenodd",d:"M12 1.5a5.25 5.25 0 00-5.25 5.25v3a3 3 0 00-3 3v6.75a3 3 0 003 3h10.5a3 3 0 003-3v-6.75a3 3 0 00-3-3v-3c0-2.9-2.35-5.25-5.25-5.25zm3.75 8.25v-3a3.75 3.75 0 10-7.5 0v3h7.5z","clip-rule":"evenodd"})])}class X{constructor(t,s=500){return new Promise((f,u)=>{t.style.removeProperty("display");let y=window.getComputedStyle(t).display;y==="none"&&(y="block"),t.style.display=y;let l=t.offsetHeight;t.style.overflow="hidden",["height","paddingTop","paddingBottom","marginTop","marginBottom"].forEach(n=>t.style[n]=0),t.offsetHeight,t.style.transitionProperty="height, margin, padding",t.style.transitionDuration=s+"ms",t.style.height=l+"px",["padding-top","padding-bottom","margin-top","margin-bottom"].forEach(n=>t.style.removeProperty(n)),window.setTimeout(()=>["height","overflow","transition-duration","transition-property"].forEach(n=>t.style.removeProperty(n)),s),f(!1)})}}class Y{constructor(t,s=500,f){return new Promise((u,y)=>{t.style.height=t.offsetHeight+"px",t.style.transitionProperty="height, margin, padding",t.style.transitionDuration=s+"ms",t.offsetHeight,t.style.overflow="hidden",["height","paddingTop","paddingBottom","marginTop","marginBottom"].forEach(l=>t.style[l]=0),window.setTimeout(()=>{t.style.display="none",["height","padding-top","padding-bottom","margin-bottom","overflow","transition-duration","transition-property"].forEach(l=>t.style.removeProperty(l)),u(!1)},s)})}}class tt{constructor(t,s=500){return window.getComputedStyle(t).display==="none"?new X(t,s):new Y(t,s)}}class et{constructor(t){let s=0,f=0;if(t===void 0)return{top:f,left:s};for(;t&&!isNaN(t.offsetLeft)&&!isNaN(t.offsetTop);)s+=t.offsetLeft-t.scrollLeft,f+=t.offsetTop-t.scrollTop,t=t.offsetParent;return{top:f,left:s}}}const ot=o=>(M("data-v-6ed1ebe8"),o=o(),F(),o),st={class:"accordion"},at={class:"flex items-center p-3"},lt={class:"slot"},nt={class:"w-full flex justify-end items-center gap-2"},rt={class:"arrow-icon icon-hover"},it=ot(()=>e("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",fill:"currentColor",class:"bi bi-trash3",viewBox:"0 0 16 16"},[e("path",{d:"M6.5 1h3a.5.5 0 0 1 .5.5v1H6v-1a.5.5 0 0 1 .5-.5ZM11 2.5v-1A1.5 1.5 0 0 0 9.5 0h-3A1.5 1.5 0 0 0 5 1.5v1H2.506a.58.58 0 0 0-.01 0H1.5a.5.5 0 0 0 0 1h.538l.853 10.66A2 2 0 0 0 4.885 16h6.23a2 2 0 0 0 1.994-1.84l.853-10.66h.538a.5.5 0 0 0 0-1h-.995a.59.59 0 0 0-.01 0H11Zm1.958 1-.846 10.58a1 1 0 0 1-.997.92h-6.23a1 1 0 0 1-.997-.92L3.042 3.5h9.916Zm-7.487 1a.5.5 0 0 1 .528.47l.5 8.5a.5.5 0 0 1-.998.06L5 5.03a.5.5 0 0 1 .47-.53Zm5.058 0a.5.5 0 0 1 .47.53l-.5 8.5a.5.5 0 1 1-.998-.06l.5-8.5a.5.5 0 0 1 .528-.47ZM8 4.5a.5.5 0 0 1 .5.5v8.5a.5.5 0 0 1-1 0V5a.5.5 0 0 1 .5-.5Z"})],-1)),dt=[it],ct={class:"body hidden"},ut={class:"px-3"},pt={__name:"Accordion",props:{vaultId:Number,data:Object},setup(o){const t=l=>{const n=l.currentTarget.nextSibling,p=l.currentTarget.querySelector(".arrow-icon svg");new tt(n).finally(()=>{new et(n).top!==0?p.style.transform="rotate(180deg)":p.style.transform=""})},s=A(null),f=S(),u=(l,n)=>{l.stopImmediatePropagation()&&l.preventDefault(),s.value=n},y=()=>{f.delete(route("vaults.datas.groups.destroy",{dataId:s.value}),{preserveScroll:!0,preserveState:!0,onSuccess:()=>s.value=null})};return(l,n)=>(h(),m(b,null,[e("div",st,[e("div",{onClick:t,class:"head"},[e("div",at,[e("div",lt,[T(l.$slots,"head",{},void 0,!0)]),e("div",nt,[e("div",rt,[i(c(R),{class:"w-5 h-5"})]),e("div",{onClick:n[0]||(n[0]=p=>u(p,o.data.id)),class:"delete icon-hover"},dt)])])]),e("div",ct,[e("div",ut,[T(l.$slots,"body",{},void 0,!0)])])]),i(L,{show:s.value!=null,onClose:n[2]||(n[2]=p=>s.value=null)},{title:a(()=>[_(" Delete Group \u2013 \u201E"+H(o.data.group_name)+"\u201C ",1)]),content:a(()=>[_(" Are you sure you would like to delete this group? ")]),footer:a(()=>[i(C,{onClick:n[1]||(n[1]=p=>s.value=null)},{default:a(()=>[_(" Cancel ")]),_:1}),i(Z,{class:N(["ml-3",{"opacity-25":c(f).processing}]),disabled:c(f).processing,onClick:y},{default:a(()=>[_(" Delete ")]),_:1},8,["class","disabled"])]),_:1},8,["show"])],64))}},vt=j(pt,[["__scopeId","data-v-6ed1ebe8"]]);const x=o=>(M("data-v-4abf7a0d"),o=o(),F(),o),_t={class:"flex justify-end mt-4 mb-4"},ft=x(()=>e("hr",{class:"my-8 block"},null,-1)),ht=["value"],mt={class:"key flex"},yt=["value"],gt=x(()=>e("span",{class:"icon"}," = ",-1)),wt={class:"value"},bt=["data-value"],xt={class:"button"},kt=x(()=>e("span",null," Encrypt ",-1)),St={class:"close"},$t=["onClick"],Ct=x(()=>e("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",fill:"currentColor",class:"bi bi-trash3",viewBox:"0 0 16 16"},[e("path",{d:"M6.5 1h3a.5.5 0 0 1 .5.5v1H6v-1a.5.5 0 0 1 .5-.5ZM11 2.5v-1A1.5 1.5 0 0 0 9.5 0h-3A1.5 1.5 0 0 0 5 1.5v1H2.506a.58.58 0 0 0-.01 0H1.5a.5.5 0 0 0 0 1h.538l.853 10.66A2 2 0 0 0 4.885 16h6.23a2 2 0 0 0 1.994-1.84l.853-10.66h.538a.5.5 0 0 0 0-1h-.995a.59.59 0 0 0-.01 0H11Zm1.958 1-.846 10.58a1 1 0 0 1-.997.92h-6.23a1 1 0 0 1-.997-.92L3.042 3.5h9.916Zm-7.487 1a.5.5 0 0 1 .528.47l.5 8.5a.5.5 0 0 1-.998.06L5 5.03a.5.5 0 0 1 .47-.53Zm5.058 0a.5.5 0 0 1 .47.53l-.5 8.5a.5.5 0 1 1-.998-.06l.5-8.5a.5.5 0 0 1 .528-.47ZM8 4.5a.5.5 0 0 1 .5.5v8.5a.5.5 0 0 1-1 0V5a.5.5 0 0 1 .5-.5Z"})],-1)),Vt=[Ct],Dt=x(()=>e("hr",{class:"mt-2"},null,-1)),Nt=["onSubmit"],Tt={class:"flex mt-3"},Bt={class:"key flex"},It=["onUpdate:modelValue"],At=x(()=>e("span",{class:"icon"}," = ",-1)),Ht={class:"value flex"},Mt=["onUpdate:modelValue"],Ft={class:"flex justify-end w-full"},Pt={__name:"VaultData",props:{vault:Object},setup(o){const t=o,s=g=>{const r=g.currentTarget.parentNode.parentNode,w=r.querySelector(".value input"),{value:v}=w.dataset;axios.post(route("vaults.datas.encrypt"),{value:v}).then(k=>{w.value="Value encrypted",r.dataset.state="decrypted"})},f=g=>{const d=g.currentTarget,r=d.parentNode.parentNode,{value:w}=d.dataset;axios.post(route("vaults.datas.decrypt"),{value:w}).then(v=>{const{data:k}=v;d.value=k,r.dataset.state="encrypted"})},u=S({dataId:Number,key:[],value:[]}),y=g=>{u.key[g],u.value[g],console.log(u.key,u.value)},l=S({vault:t.vault,name:""}),n=()=>{l.post(route("vaults.datas.groups.create"),{preserveScroll:!0,preserveState:!0,onSuccess:()=>l.reset("name")})},p=A(null),$=S(),E=(g,d)=>{p.value={dataId:g,key:d}},G=()=>{$.delete(route("vaults.datas.groups.fields.destroy",{data:p.value}),{preserveScroll:!0,preserveState:!0,onSuccess:()=>p.value=null})};return(g,d)=>(h(),m(b,null,[i(J,{for:"group-name",value:"Group Name"}),i(Q,{modelValue:c(l).name,"onUpdate:modelValue":d[0]||(d[0]=r=>c(l).name=r),id:"group-name",type:"text",class:"mt-1 block w-full"},null,8,["modelValue"]),e("div",_t,[i(P,{onClick:n},{default:a(()=>[_(" Add group ")]),_:1})]),ft,(h(!0),m(b,null,D(o.vault.datas,(r,w)=>(h(),m("div",{key:w,class:"data mt-4 shadow-md border rounded-lg"},[i(vt,{vaultId:o.vault.id,data:r},{head:a(()=>[e("input",{type:"text",value:r.group_name,class:"py-0 pl-0 font-bold w-max",onClick:d[1]||(d[1]=v=>{v.stopImmediatePropagation()})},null,8,ht)]),body:a(()=>[(h(!0),m(b,null,D(JSON.parse(r.fields),v=>(h(),m(b,{key:v},[(h(!0),m(b,null,D(v,(k,V)=>(h(),m("div",{key:V,class:"state flex mb-2","data-state":"decrypted"},[e("div",mt,[e("input",{type:"text",value:V,class:"key pl-0"},null,8,yt),gt]),e("div",wt,[e("input",{onClick:f,"data-value":k,type:"text",value:"Value encrypted"},null,8,bt)]),e("div",xt,[i(C,{onClick:s,"data-value":k},{default:a(()=>[i(c(W),{class:"w-5 h-5 mr-2"}),kt]),_:2},1032,["data-value"])]),e("div",St,[e("div",{onClick:Et=>E(r.id,V),class:"icon-hover"},Vt,8,$t)])]))),128))],64))),128)),Dt,e("form",{onSubmit:U(v=>y(r.id),["prevent"])},[e("div",Tt,[e("div",Bt,[B(e("input",{"onUpdate:modelValue":v=>c(u).key[r.id]=v,type:"text",class:"key pl-0",placeholder:"Key / Identifier"},null,8,It),[[I,c(u).key[r.id]]]),At]),e("div",Ht,[B(e("input",{"onUpdate:modelValue":v=>c(u).value[r.id]=v,type:"text",placeholder:"Value"},null,8,Mt),[[I,c(u).value[r.id]]])]),e("div",Ft,[i(C,{onClick:v=>y(r.id),class:"my-5"},{default:a(()=>[_(" Add field ")]),_:2},1032,["onClick"])])])],40,Nt)]),_:2},1032,["vaultId","data"])]))),128)),i(L,{show:p.value!=null,onClose:d[3]||(d[3]=r=>p.value=null)},{title:a(()=>[_(" Delete Field \u2013 \u201E"+H(p.value.key)+"\u201C ",1)]),content:a(()=>[_(" Are you sure you would like to delete this field? ")]),footer:a(()=>[i(C,{onClick:d[2]||(d[2]=r=>p.value=null)},{default:a(()=>[_(" Cancel ")]),_:1}),i(Z,{class:N(["ml-3",{"opacity-25":c($).processing}]),disabled:c($).processing,onClick:G},{default:a(()=>[_(" Delete ")]),_:1},8,["class","disabled"])]),_:1},8,["show"])],64))}},Zt=j(Pt,[["__scopeId","data-v-4abf7a0d"]]),Lt={key:0},jt={class:"col-span-6"},ee={__name:"VaultDataManager",props:{vault:Object},setup(o){const t=S({logo:null,name:"",url:""}),s=()=>{};return(f,u)=>o.vault?(h(),m("div",Lt,[i(K),i(q,{onSubmitted:s},{title:a(()=>[_(" Vault Data Manager ")]),description:a(()=>[_(" Here you can add vault-related data like credentials for a specific area of this vault. ")]),form:a(()=>[e("div",jt,[i(Zt,{vault:o.vault},null,8,["vault"])])]),actions:a(()=>[i(O,{on:c(t).recentlySuccessful,class:"mr-3"},{default:a(()=>[_(" Saved. ")]),_:1},8,["on"]),i(P,{class:N({"opacity-25":c(t).processing}),disabled:c(t).processing},{default:a(()=>[_(" Save ")]),_:1},8,["class","disabled"])]),_:1})])):z("",!0)}};export{ee as default};
